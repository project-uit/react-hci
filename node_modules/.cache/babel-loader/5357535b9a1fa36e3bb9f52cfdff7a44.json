{"ast":null,"code":"import _classCallCheck from \"E:\\\\Git\\\\react-hci\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Git\\\\react-hci\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\Git\\\\react-hci\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\Git\\\\react-hci\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\Git\\\\react-hci\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\Git\\\\react-hci\\\\src\\\\Checkout\\\\Checkout.js\";\nimport './Checkout.css';\nimport React, { Component } from 'react';\nimport { Steps, Button, message, Card, Radio, Divider, Col, Row, Alert } from 'antd';\nimport StepOne from './StepOne';\nimport StepTwo from './StepTwo';\nimport StepThree from './StepThree';\nimport { database } from '../../firebase';\nimport moment from 'moment';\nvar Step = Steps.Step;\n\nvar Checkout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Checkout, _Component);\n\n  function Checkout() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Checkout);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Checkout)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      current: 0,\n      customer: null,\n      isValid: false,\n      total: 0,\n      discount: 0,\n      summary: 0,\n      shipMethod: 'normal',\n      paymentMethod: 'cod',\n      paid: false\n    };\n\n    _this.handlerNext = function (customer, isValid, paymentMethod) {\n      var current = _this.state.current;\n\n      if (current === 0) {\n        if (!isValid) {\n          message.error('Vui lòng điền đầy đủ thông tin');\n        } else {\n          _this.setState({\n            customer: customer,\n            isValid: true\n          });\n\n          _this.next();\n        }\n\n        return;\n      }\n\n      if (_this.state.current === 1) {\n        _this.setState({\n          paymentMethod: paymentMethod\n        });\n\n        _this.next();\n      }\n    };\n\n    _this.onChangeShipMethod = function (e) {\n      console.log('ship method: ', e.target.value);\n\n      _this.setState({\n        shipMethod: e.target.value\n      });\n    };\n\n    _this.pay = function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          customer = _this$state.customer,\n          shipMethod = _this$state.shipMethod,\n          paymentMethod = _this$state.paymentMethod,\n          total = _this$state.total,\n          discount = _this$state.discount,\n          summary = _this$state.summary;\n\n      _this.addNewOrder(customer, shipMethod, paymentMethod, total, discount, summary).then(function () {// success\n      }).catch(function (error) {\n        message.error('Thanh toán thất bại! ' + error);\n      });\n\n      _this.setState({\n        paid: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Checkout, [{\n    key: \"addNewOrder\",\n    value: function addNewOrder(customer, shipMethod, paymentMethod, total, discount, summary) {\n      // Get a key for a new order.\n      var key = database.ref().child('orders').push().key; // A order entry.\n\n      var order = {\n        orderId: key,\n        orderDate: moment().format(\"DD-MM-YYYY\"),\n        customerEmail: customer.email,\n        customerName: customer.name,\n        customerPhone: customer.prefix + customer.phone,\n        customerAddress: customer.address,\n        shipMethod: shipMethod,\n        paymentMethod: paymentMethod,\n        // total: total,\n        // discount: discount,\n        summary: summary,\n        status: 'Mới nhận'\n      }; // Write order\n\n      var updates = {};\n      updates['/orders/' + key] = order;\n      return database.ref().update(updates);\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      var current = this.state.current + 1;\n      this.setState({\n        current: current\n      });\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      var current = this.state.current - 1;\n      this.setState({\n        current: current\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          current = _this$state2.current,\n          shipMethod = _this$state2.shipMethod,\n          customer = _this$state2.customer,\n          total = _this$state2.total,\n          discount = _this$state2.discount,\n          summary = _this$state2.summary,\n          paymentMethod = _this$state2.paymentMethod,\n          paid = _this$state2.paid;\n      var layout = {\n        paymentZone: {\n          xs: 24,\n          sm: 16,\n          md: 16,\n          lg: 16\n        },\n        cartZone: {\n          xs: 24,\n          sm: 8,\n          md: 8,\n          lg: 8\n        }\n      };\n      var steps = [{\n        title: 'Địa chỉ',\n        content: React.createElement(StepOne, {\n          customer: customer,\n          handlerNext: this.handlerNext,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        })\n      }, {\n        title: 'Thanh toán',\n        content: React.createElement(StepTwo, {\n          handlerNext: this.handlerNext,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        })\n      }, {\n        title: 'Hoàn tất',\n        content: React.createElement(StepThree, {\n          customer: customer,\n          summary: summary,\n          shipMethod: shipMethod,\n          paymentMethod: paymentMethod,\n          total: total,\n          discount: discount,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        })\n      }];\n      return React.createElement(\"div\", {\n        style: {\n          padding: '50px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(Row, {\n        gutter: 32,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Col, Object.assign({}, layout.paymentZone, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), paid && React.createElement(Alert, {\n        message: \"Thanh to\\xE1n th\\xE0nh c\\xF4ng\",\n        description: \"C\\u1EA3m \\u01A1n b\\u1EA1n \\u0111\\xE3 mua s\\u1EA3n ph\\u1EA9m c\\u1EE7a ch\\xFAng t\\xF4i. B\\u1EA1n s\\u1EBD nh\\u1EADn \\u0111\\u01B0\\u1EE3c email v\\u1EC1 th\\xF4ng tin chi ti\\u1EBFt \\u0111\\u01A1n h\\xE0ng n\\xE0y\",\n        type: \"success\",\n        showIcon: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(Card, {\n        title: \"Thanh to\\xE1n \\u0111\\u01A1n h\\xE0ng\",\n        bordered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(Steps, {\n        current: current,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, steps.map(function (item) {\n        return React.createElement(Step, {\n          key: item.title,\n          title: item.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        });\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"steps-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, steps[current].content), React.createElement(\"div\", {\n        className: \"steps-action\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, current > 0 && React.createElement(Button, {\n        disabled: paid,\n        onClick: function onClick() {\n          return _this2.prev();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Quay l\\u1EA1i\"), current === steps.length - 1 && React.createElement(Button, {\n        className: \"float-right\",\n        type: \"primary\",\n        disabled: paid,\n        onClick: this.pay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Thanh to\\xE1n\")))), React.createElement(Col, Object.assign({}, layout.cartZone, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(Card, {\n        title: \"Gi\\u1ECF h\\xE0ng c\\u1EE7a b\\u1EA1n\",\n        bordered: true,\n        style: {\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Card content\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Card content\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"Card content\"), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), React.createElement(Card, {\n        title: \"Ch\\u1EBF \\u0111\\u1ED9 giao h\\xE0ng\",\n        bordered: true,\n        className: \"center-items\",\n        style: {\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Radio.Group, {\n        onChange: this.onChangeShipMethod,\n        defaultValue: \"normal\",\n        buttonStyle: \"solid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(Radio.Button, {\n        disabled: paid,\n        value: \"default\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"M\\u1EB7c \\u0111\\u1ECBnh\"), React.createElement(Radio.Button, {\n        disabled: paid,\n        value: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Ti\\xEAu chu\\u1EA9n\"), React.createElement(Radio.Button, {\n        disabled: paid,\n        value: \"fast\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Nhanh\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), shipMethod === 'default' && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"H\\xECnh th\\u1EE9c giao h\\xE0ng m\\u1EB7c \\u0111\\u1ECBnh ..... \"), shipMethod === 'normal' && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"H\\xECnh th\\u1EE9c giao h\\xE0ng ti\\xEAu chu\\u1EA9n ..... \"), shipMethod === 'fast' && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"H\\xECnh th\\u1EE9c giao h\\xE0ng nhanh ..... \")))));\n    }\n  }]);\n\n  return Checkout;\n}(Component);\n\nexport default Checkout;","map":{"version":3,"sources":["E:\\Git\\react-hci\\src\\Checkout\\Checkout.js"],"names":["React","Component","Steps","Button","message","Card","Radio","Divider","Col","Row","Alert","StepOne","StepTwo","StepThree","database","moment","Step","Checkout","state","current","customer","isValid","total","discount","summary","shipMethod","paymentMethod","paid","handlerNext","error","setState","next","onChangeShipMethod","e","console","log","target","value","pay","preventDefault","addNewOrder","then","catch","key","ref","child","push","order","orderId","orderDate","format","customerEmail","email","customerName","name","customerPhone","prefix","phone","customerAddress","address","status","updates","update","layout","paymentZone","xs","sm","md","lg","cartZone","steps","title","content","padding","map","item","prev","length","width","textAlign"],"mappings":"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","sourcesContent":["import './Checkout.css';\nimport React, { Component } from 'react';\nimport { Steps, Button, message, Card, Radio, Divider, Col, Row, Alert } from 'antd';\nimport StepOne from './StepOne';\nimport StepTwo from './StepTwo';\nimport StepThree from './StepThree';\nimport { database } from '../../firebase';\nimport moment from 'moment';\n\nconst Step = Steps.Step;\n\nclass Checkout extends Component {\n    state = {\n        current: 0,\n        customer: null,\n        isValid: false,\n        total: 0,\n        discount: 0,\n        summary: 0,\n        shipMethod: 'normal',\n        paymentMethod: 'cod',\n        paid: false,\n    };\n\n    handlerNext = (customer, isValid, paymentMethod) => {\n        const { current } = this.state;\n        if (current === 0) {\n            if (!isValid) {\n                message.error('Vui lòng điền đầy đủ thông tin');\n            } else {\n                this.setState({\n                    customer: customer,\n                    isValid: true,\n                });\n                this.next();\n            }\n            return;\n        }\n\n        if (this.state.current === 1) {\n            this.setState({\n                paymentMethod: paymentMethod,\n            });\n            this.next();\n        }\n    }\n\n    onChangeShipMethod = (e) => {\n        console.log('ship method: ', e.target.value);\n        this.setState({\n            shipMethod: e.target.value,\n        });\n    }\n\n    pay = (e) => {\n        e.preventDefault();\n        const { customer, shipMethod, paymentMethod, total, discount, summary } = this.state;\n        this.addNewOrder(customer, shipMethod, paymentMethod, total, discount, summary).then(function () {\n            // success\n\n        }).catch(function (error) {\n            message.error('Thanh toán thất bại! ' + error)\n        });\n\n        this.setState({\n            paid: true,\n        });\n    }\n\n    addNewOrder(customer, shipMethod, paymentMethod, total, discount, summary) {\n        // Get a key for a new order.\n        var key = database.ref().child('orders').push().key;\n\n        // A order entry.\n        var order = {\n            orderId: key,\n            orderDate: moment().format(\"DD-MM-YYYY\"),\n            customerEmail: customer.email,\n            customerName: customer.name,\n            customerPhone: customer.prefix + customer.phone,\n            customerAddress: customer.address,\n            shipMethod: shipMethod,\n            paymentMethod: paymentMethod,\n            // total: total,\n            // discount: discount,\n            summary: summary,\n            status: 'Mới nhận'\n        };\n\n        // Write order\n        var updates = {};\n        updates['/orders/' + key] = order;\n\n        return database.ref().update(updates);\n    }\n\n    next() {\n        const current = this.state.current + 1;\n        this.setState({ current });\n    }\n    prev() {\n        const current = this.state.current - 1;\n        this.setState({ current });\n    }\n\n    render() {\n        const { current, shipMethod, customer, total, discount, summary, paymentMethod, paid } = this.state;\n        const layout = {\n            paymentZone: { xs: 24, sm: 16, md: 16, lg: 16 },\n            cartZone: { xs: 24, sm: 8, md: 8, lg: 8 },\n        }\n        const steps = [{\n            title: 'Địa chỉ',\n            content: <StepOne customer={customer} handlerNext={this.handlerNext} />,\n        }, {\n            title: 'Thanh toán',\n            content: <StepTwo handlerNext={this.handlerNext} />,\n        }, {\n            title: 'Hoàn tất',\n            content: <StepThree customer={customer} summary={summary} shipMethod={shipMethod}\n                paymentMethod={paymentMethod} total={total} discount={discount} />,\n        }];\n\n        return (\n            <div style={{ padding: '50px' }}>\n\n                <br />\n                <Row gutter={32}>\n                    <Col {...layout.paymentZone}>\n                        {\n                            paid &&\n                            <Alert\n                                message=\"Thanh toán thành công\"\n                                description=\"Cảm ơn bạn đã mua sản phẩm của chúng tôi. Bạn sẽ nhận được email về thông tin chi tiết đơn hàng này\"\n                                type=\"success\"\n                                showIcon\n                            />\n                        }\n                        <Card title=\"Thanh toán đơn hàng\" bordered={true} >\n                            <Steps current={current}>\n                                {steps.map(item => <Step key={item.title} title={item.title} />)}\n                            </Steps>\n                            <br />\n                            <div className=\"steps-content\">\n                                {steps[current].content}\n                            </div>\n                            <div className=\"steps-action\">\n                                {\n                                    current > 0\n                                    &&\n                                    (\n                                        <Button disabled={paid} onClick={() => this.prev()}>\n                                            Quay lại\n                                        </Button>\n                                    )\n                                }\n                                {\n                                    current === steps.length - 1\n                                    && <Button className=\"float-right\" type=\"primary\" disabled={paid} onClick={this.pay}>Thanh toán</Button>\n                                }\n                            </div>\n                        </Card>\n                    </Col>\n\n                    <Col {...layout.cartZone}>\n                        <Card title=\"Giỏ hàng của bạn\" bordered={true} style={{ width: '100%' }}>\n                            <p>Card content</p>\n                            <p>Card content</p>\n                            <p>Card content</p>\n                            <Divider></Divider>\n                        </Card>\n                        <br />\n                        <Card title=\"Chế độ giao hàng\" bordered={true} className=\"center-items\" style={{ width: '100%' }}>\n                            <div style={{ textAlign: 'center' }}>\n                                <Radio.Group onChange={this.onChangeShipMethod} defaultValue=\"normal\" buttonStyle=\"solid\">\n                                    <Radio.Button disabled={paid} value=\"default\">Mặc định</Radio.Button>\n                                    <Radio.Button disabled={paid} value=\"normal\">Tiêu chuẩn</Radio.Button>\n                                    <Radio.Button disabled={paid} value=\"fast\">Nhanh</Radio.Button>\n                                </Radio.Group>\n                            </div>\n                            <br /><br />\n                            {shipMethod === 'default' &&\n                                <p>Hình thức giao hàng mặc định ..... </p>\n                            }\n                            {shipMethod === 'normal' &&\n                                <p>Hình thức giao hàng tiêu chuẩn ..... </p>\n                            }\n                            {shipMethod === 'fast' &&\n                                <p>Hình thức giao hàng nhanh ..... </p>\n                            }\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default Checkout;\n"]},"metadata":{},"sourceType":"module"}